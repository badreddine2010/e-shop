!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},t={},n=e.parcelRequire3642;null==n&&((n=function(e){if(e in o)return o[e].exports;if(e in t){let n=t[e];delete t[e];let i={id:e,exports:{}};return o[e]=i,n.call(i.exports,i,i.exports),i.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,o){t[e]=o},e.parcelRequire3642=n);var i=n("7InKK"),r=n("51MI4"),a=n("1ivHE"),l=n("3Riux");const c="./images/badge.svg",s="./images/icon.svg",d=TrelloPowerUp.Promise;window.addEventListener("storage",(e=>{e.key.match(/^[a-f0-9]{24}:badge$/)&&setTimeout((()=>{try{window.localStorage.removeItem(e.key)}catch(e){}}),5e3)}));const u=e=>(a.locale(window.locale),a.unix(e).format("LLL")),h=(e={})=>{const{idCard:o,unixTime:t}=e;return!(!o||!t)},m=e=>e.remove("card","shared","snooze"),z=(e,o,t,n)=>{const i={icon:o};return t&&n&&(i.title=t,i.text=n),i},y=(e,o,t)=>{const n=((e,o,t)=>{const n="".concat(o,":badge");let i;try{i=window.localStorage.getItem(n)}catch(e){}if(i){try{i=JSON.parse(i)}catch(e){window.localStorage.removeItem(n)}if(h(i)){if(t){const o=e.localizeKey("card_snoozed_until");return z(0,c,o,u(i.unixTime))}return z(0,c)}}return null})(e,o,t);return n?d.resolve([n]):e.get("card","shared","snooze").then((o=>h(o)?e.card("id","closed").then((n=>{if(!n.id===o.id)return m(e),[];if(r=o.unixTime,new Date(1e3*r)<Date.now())return n.closed||m(e),[];var r;if(!n.closed)return i.verify(n.id).then((()=>(m(e),[]))).catch((()=>[]));if(t){const t=e.localizeKey("card_snoozed_until");return[z(0,c,t,u(o.unixTime))]}return[z(0,c)]})).catch((()=>[])):[])).catch((()=>[]))},w=(e,o)=>y(e,o.context.card,!1),x=(e,o)=>{if("write"!==o.context.permissions.board)return[];a.locale(window.locale);const t=a(),n=e=>e.popup({title:e.localizeKey("change_snooze_time"),url:"./set-snooze.html",height:411}),i=[{text:e.localizeKey("in_one_hour"),snoozeTime:a(t).add(1,"hour")},{text:e.localizeKey("in_two_hours"),snoozeTime:a(t).add(2,"hour")},{text:e.localizeKey("in_four_hours"),snoozeTime:a(t).add(4,"hour")},{text:e.localizeKey("tomorrow_morning"),snoozeTime:a(t).add(1,"day").hour(9).minutes(0)},{text:e.localizeKey("tomorrow_afternoon"),snoozeTime:a(t).add(1,"day").hour(15).minutes(0)},{text:e.localizeKey("in_two_days"),snoozeTime:a(t).add(2,"days")},{text:e.localizeKey("in_four_days"),snoozeTime:a(t).add(4,"days")},{text:e.localizeKey("in_one_week"),snoozeTime:a(t).add(1,"week")},{text:e.localizeKey("in_two_weeks"),snoozeTime:a(t).add(2,"weeks")},{text:e.localizeKey("in_one_month"),snoozeTime:a(t).add(1,"month")}],r=[{text:e.localizeKey("choose_time"),callback:n}];return i.forEach((e=>{r.push({text:e.text,callback:o=>l(o,e.snoozeTime.unix()).then((()=>o.closePopup())).catch(console.error)})})),e.get("card","shared","snooze").then((o=>o?[{icon:s,text:e.localizeKey("snooze"),callback:n}]:[{icon:s,text:e.localizeKey("snooze"),callback:o=>o.popup({title:e.localizeKey("unsnooze_card"),items:r})}])).catch((()=>[]))},f=(e,o)=>{const t="write"===o.context.permissions.board,n=e=>e.popup({title:e.localizeKey("change_snooze_time"),url:"./set-snooze.html",height:411});return y(e,o.context.card,!0).then((e=>{const o=e;return e&&1===e.length&&t&&(o[0].callback=n),o})).catch((()=>[]))};TrelloPowerUp.initialize({"card-badges":w,"card-buttons":x,"card-detail-badges":f},{localization:r,targetOrigin:"https://trello.com",Sentry:window.Sentry})}();
//# sourceMappingURL=index.48720027.js.map
